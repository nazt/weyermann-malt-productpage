# Never Push to Main - Always Use PR Flow

**Time**: 17:00 GMT+7

## What We Learned

- **We kept pushing to main** even after creating PR workflow tools
- Building the tool ‚â† using the tool
- Must enforce discipline, not just create capability

## The Mistake Pattern

```
1. Updated executor to support "with PR" mode ‚úÖ
2. Immediately pushed that update to main ‚ùå
3. Did cleanup, pushed to main again ‚ùå
4. User asked "where PR?" - none existed!
```

## How Things Connect

- **executor agent** has `with PR` mode but main agent didn't invoke it
- **CLAUDE.md** says "NEVER push directly to main" but we ignored it
- Creating a tool doesn't mean it gets used automatically

## Key Rule (MEMORIZE)

```
‚ö†Ô∏è BEFORE ANY COMMIT:
   Is this going to main? ‚Üí STOP ‚Üí Use PR flow

   Execute issue #N with PR  ‚Üê USE THIS
   NOT
   Execute issue #N          ‚Üê DON'T USE THIS
```

## Correct Flow

```
1. Create issue with plan
2. User approves
3. Execute issue #N with PR  ‚Üê CRITICAL
4. Executor creates branch + PR
5. Return PR URL to user
6. User reviews and merges
```

## Anti-Pattern (What We Did Wrong)

```
1. Create issue
2. User approves
3. Execute issue #N  ‚Üê WRONG - no PR
4. Commits directly to main
5. Push to main
6. User asks "where PR?" üòÖ
```

## Commits This Session

- `ad996b0` feat: Executor supports GitHub flow with PR mode
- Multiple reverts because we kept messing up

## Tags

`pr-flow` `github-flow` `discipline` `anti-pattern` `executor`

## Raw Thoughts

- We built the PR capability but didn't use it ourselves
- Ironic: updating the tool that enforces PRs... without a PR
- Need to make PR mode the DEFAULT, not optional
- Maybe rename: `Execute issue #N` should REQUIRE "with PR"
- Or: main agent should refuse direct commits entirely
